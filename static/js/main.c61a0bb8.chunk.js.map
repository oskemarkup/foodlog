{"version":3,"sources":["store/reducer.js","utils/token.js","store/index.js","store/selectors.js","store/actions.js","components/Spinner.jsx","components/Arrow.jsx","components/Header.jsx","utils/index.js","components/Card.jsx","components/Day.jsx","components/Content.jsx","components/AddNew.jsx","components/Field.jsx","components/Trash.jsx","components/Form.jsx","components/Modal.jsx","components/Main.jsx","components/Auth.jsx","App.jsx","index.js"],"names":["initialState","meals","status","modal","id","modalStatus","user","isAuthorized","reducer","handleActions","LOGIN","store","LOGOUT","SET_USER_DATA","action","payload","LOAD_MEALS_REQUEST","LOAD_MEALS_SUCCESS","LOAD_MEALS_FAILURE","OPEN_MODAL","CLOSE_MODAL","MODAL_REQUEST","MODAL_SUCCESS","MODAL_FAILURE","CREATE_MEAL_SUCCESS","concat","UPDATE_MEAL_SUCCESS","mealIndex","findIndex","meal","_id","Object","assign","DELETE_MEAL_SUCCESS","filter","tokenStorage","localStorage","getItem","setToken","token","setItem","clearToken","removeItem","createStore","applyMiddleware","thunk","withExtraArgument","timeToMinutes","time","split","hours","minutes","parseInt","sortByTime","a","b","getDays","state","Set","map","date","sort","reverse","isModalActive","getModalStatus","getStatus","getSelectedMeal","find","getUserData","getIsAuthorized","loadMealsRequest","createAction","loadMealsSuccess","loadMealsFailure","createMealSuccess","updateMealSuccess","deleteMealSuccess","login","logout","setUserData","openModal","closeModal","modalRequest","modalSuccess","modalFailure","Spinner","className","Arrow","xmlns","viewBox","d","emojis","Boolean","Header","useState","dropdownActive","setDropdownActive","Math","floor","random","length","emojiIndex","useSelector","dispatch","useDispatch","onClick","active","src","picture","alt","name","email","window","gapi","auth2","getAuthInstance","signOut","then","calculateProduct","calorie","quantity","type","round","indexOf","sum","acc","val","first","el","locales","getLocale","count","field","Array","isArray","n","CardProduct","amount","design","substr","Card","sums","products","mealSum","productSums","some","product","index","key","Day","day","setActive","mealSums","reduce","daySum","moment","format","Content","days","AddNew","inputClassName","last","Field","title","placeholder","value","onChange","Select","options","entries","Label","children","Input","FieldGroup","Trash","typeLabels","quantityLabels","initialProduct","Form","now","loading","onRemove","getState","fetch","process","getToken","method","response","json","err","console","log","deleteMeal","catch","c","useFormik","initialValues","onSubmit","values","headers","body","JSON","stringify","updateMeal","createMeal","onReset","setFieldValue","handleSubmit","handleChange","handleReset","productCount","addProduct","i","_","productIndex","Modal","modalActive","useEffect","document","style","paddingRight","outer","createElement","visibility","overflow","msOverflowStyle","appendChild","inner","scrollbarWidth","offsetWidth","parentNode","removeChild","getScrollbarWidth","classList","add","remove","Main","ok","error","data","Auth","signIn","googleUser","id_token","getAuthResponse","fill","App","isAuthorized2","ReactDOM","render","getElementById"],"mappings":"yQAEMA,EAAe,CACnBC,MAAO,GACPC,OAAQ,KACRC,OAAO,EACPC,GAAI,KACJC,YAAa,KACbC,KAAM,KACNC,aAAc,MAuCDC,EApCCC,YAAc,CAC5BC,MAAO,SAAAC,GAAK,sBAAUA,EAAV,CAAiBJ,cAAc,KAC3CK,OAAQ,iCAAYZ,IACpBa,cAAe,SAACF,EAAOG,GAAR,sBAAyBH,EAAzB,CAAgCL,KAAMQ,EAAOC,WAE5DC,mBAAoB,SAAAL,GAAK,sBAAUA,EAAV,CAAiBT,OAAQ,aAClDe,mBAAoB,SAACN,EAAOG,GAAR,sBAAyBH,EAAzB,CAAgCV,MAAOa,EAAOC,QAASb,OAAQ,QACnFgB,mBAAoB,SAAAP,GAAK,sBAAUA,EAAV,CAAiBT,OAAQ,YAElDiB,WAAY,SAACR,EAAOG,GAAR,sBAAyBH,EAAzB,CAAgCR,OAAO,EAAMC,GAAIU,EAAOC,WACpEK,YAAa,SAAAT,GAAK,sBAAUA,EAAV,CAAiBR,OAAO,EAAOC,GAAI,QACrDiB,cAAe,SAAAV,GAAK,sBAAUA,EAAV,CAAiBN,YAAa,aAClDiB,cAAe,SAAAX,GAAK,sBAAUA,EAAV,CAAiBN,YAAa,QAClDkB,cAAe,SAAAZ,GAAK,sBAAUA,EAAV,CAAiBN,YAAa,YAElDmB,oBAAqB,SAACb,EAAOG,GAAR,sBAChBH,EADgB,CAEnBV,MAAOU,EAAMV,MAAMwB,OAAOX,EAAOC,YAGnCW,oBAAqB,SAACf,EAAOG,GAC3B,IAAMa,EAAYhB,EAAMV,MAAM2B,WAAU,SAAAC,GAAI,OAAIA,EAAKC,MAAQhB,EAAOC,QAAQe,OAE5E,OAAO,eACFnB,EADL,CAEEV,MAAO8B,OAAOC,OAAO,GAAIrB,EAAMV,MAAxB8B,OAAA,IAAAA,CAAA,GAAkCJ,EAAYb,EAAOC,aAIhEkB,oBAAqB,SAACtB,EAAOG,GAAR,sBAChBH,EADgB,CAEnBV,MAAOU,EAAMV,MAAMiC,QAAO,SAAAL,GAAI,OAAIA,EAAKC,MAAQhB,EAAOC,QAAQe,WAG/D9B,GChCYmC,EAZM,CACnB,eACE,OAAOC,aAAaC,QAJL,aAMjBC,SAJmB,SAIVC,GACPH,aAAaI,QAPE,WAOiBD,IAElCE,WAPmB,WAQjBL,aAAaM,WAVE,cCOJ/B,EAFDgC,YAAYnC,EAASoC,YAAgBC,IAAMC,kBAAkBX,K,eCLrEY,EAAgB,SAAAC,GAAS,IAAD,EACHA,EAAKC,MAAM,KADR,mBACrBC,EADqB,KACdC,EADc,KAG5B,OAAe,GAARD,EAAaE,SAASD,IAGzBE,EAAa,SAACC,EAAGC,GACrB,OAAKD,EAAEN,KAEKO,EAAEP,KAIPD,EAAcQ,EAAEP,MAAQD,EAAcO,EAAEN,MAHtC,GAFC,GAQCQ,EAAU,SAAAC,GAAK,OAAI,YAAK,IAAIC,IAAID,EAAMxD,MAAM0D,KAAI,SAAA9B,GAAI,OAAIA,EAAK+B,UAASC,OAAOC,WAE7EC,EAAgB,SAAAN,GAAK,OAAIA,EAAMtD,OAC/B6D,EAAiB,SAAAP,GAAK,OAAIA,EAAMpD,aAChC4D,EAAY,SAAAR,GAAK,OAAIA,EAAMvD,QAC3BgE,EAAkB,SAAAT,GAAK,OAAIA,EAAMxD,MAAMkE,MAAK,SAAAtC,GAAI,OAAIA,EAAKC,MAAQ2B,EAAMrD,OACvEgE,EAAc,SAAAX,GAAK,OAAIA,EAAMnD,MAC7B+D,EAAkB,SAAAZ,GAAK,OAAIA,EAAMlD,c,QCrBxC+D,EAAmBC,YAAa,sBAChCC,EAAmBD,YAAa,sBAChCE,EAAmBF,YAAa,sBAEhCG,EAAoBH,YAAa,uBACjCI,EAAoBJ,YAAa,uBACjCK,EAAoBL,YAAa,uBAE1BM,EAAQN,YAAa,SACrBO,EAASP,YAAa,UACtBQ,EAAcR,YAAa,iBAE3BS,EAAYT,YAAa,cACzBU,EAAaV,YAAa,eAC1BW,EAAeX,YAAa,iBAC5BY,EAAeZ,YAAa,iBAC5Ba,EAAeb,YAAa,iBCZ1Bc,EAJC,SAAC,GAAD,EAAGC,UAAH,OACd,yBAAKA,UAAU,aCKFC,EAND,SAAC,GAAD,IAAGD,EAAH,EAAGA,UAAH,OACZ,yBAAKA,UAAWA,EAAWE,MAAM,6BAA6BC,QAAQ,aACpE,0BAAMC,EAAE,iFCGNC,EAAS,mVACZ1C,MAAM,oCAAoCf,OAAO0D,SA2CrCC,EAzCA,WAAO,IAAD,EACyBC,oBAAS,GADlC,mBACZC,EADY,KACIC,EADJ,OAEEF,oBAAS,kBAAMG,KAAKC,MAAMD,KAAKE,SAAWR,EAAOS,WAA/DC,EAFY,oBAIb/F,EAAOgG,YAAYlC,GACnBmC,EAAWC,cAUjB,OACE,yBAAKlB,UAAU,UACb,yBAAKA,UAAU,eAAeK,EAAOU,GAArC,YACC/F,GACC,yBAAKgF,UAAU,kBACb,yBAAKA,UAAU,qBAAqBmB,QAjB5B,kBAAMT,GAAkB,SAAAU,GAAM,OAAKA,OAkBzC,yBAAKpB,UAAU,sBAAsBqB,IAAKrG,EAAKsG,QAASC,IAAI,KAC5D,kBAAC,EAAD,CAAOvB,UAAU,yBAElBS,GACC,yBAAKT,UAAU,0BACb,yBAAKA,UAAU,sBACb,uBAAGA,UAAU,sBAAsBhF,EAAKwG,MACxC,uBAAGxB,UAAU,uBAAuBhF,EAAKyG,QAE3C,wBAAIzB,UAAU,sBACZ,4BAAI,4BAAQmB,QAxBT,WACDO,OAAOC,KAAKC,MAAMC,kBAC1BC,UAAUC,MAAK,WACnBlF,EAAaM,aACb8D,EAASzB,SAoBgCQ,UAAU,sBAArC,wCCPb,IAAMgC,EAAmB,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAASC,EAAZ,EAAYA,SAAUC,EAAtB,EAAsBA,KAAtB,OAC9BxB,KAAKyB,MAAMH,EAAUC,GAA0D,IAA7C,CAAC,aAAc,QAAQG,QAAQF,IAAS,GAAU,KAGzEG,EAAM,SAACC,EAAKC,GAAN,OAAcD,EAAMC,GAE1BC,EAAQ,SAAAC,GAAE,OAAIA,EAAG,ICnCxBC,EAAU,CACdT,SAAU,CACR,QAAW,CAAC,uCAAU,uCAAU,wCAChC,MAAS,eACT,WAAc,eACd,KAAQ,gBAEVD,QAAS,CACP,QAAW,kEACX,MAAS,0CACT,WAAc,8CACd,KAAQ,gDAINW,EAAY,SAACC,EAAOC,EAAOX,GAC/B,OAAKQ,EAAQG,IAAWH,EAAQG,GAAOX,GAIjC,GAAN,OAAUU,EAAV,YAAmBE,MAAMC,QAAQL,EAAQG,GAAOX,IAAgBQ,EAAQG,GAAOX,IDJnDc,ECI0DJ,GDD9E,KAAO,GAAKI,EAAI,MAAQ,GACxB,EACGA,EAAI,IAAM,GAAKA,EAAI,IAAM,IAAMA,EAAI,IAAM,IAAMA,EAAI,KAAO,IAC7D,EAEA,IAEa,GCN0EN,EAAQG,GAAOX,IAHrGU,EDDJ,IAAuBI,GCOxBC,EAAc,SAAC,GAAD,IAAG1B,EAAH,EAAGA,KAAMU,EAAT,EAASA,SAAUD,EAAnB,EAAmBA,QAASkB,EAA5B,EAA4BA,OAAQC,EAApC,EAAoCA,OAAQjB,EAA5C,EAA4CA,KAA5C,OAClB,yBAAKnC,UAAS,oCAA+BoD,IAC3C,yBAAKpD,UAAU,oBACb,yBAAKA,UAAU,qBACb,yBAAKA,UAAU,oBAAoBwB,EAAK6B,OAAO,EAAG,MACjDnB,GAAY,yBAAKlC,UAAU,wBAAwB4C,EAAUV,EAAU,WAAYC,KAErFF,GAAW,yBAAKjC,UAAU,uBAAuB4C,EAAUX,EAAS,UAAWE,KAEjF7B,QAAQ6C,IAAW,yBAAKnD,UAAS,kDAA6CoD,IAAWD,EAAtE,+BAyCTG,GArCF,SAAC,GAAoB,IAAlB/G,EAAiB,EAAjBA,KAAMgH,EAAW,EAAXA,KACZ/G,EAA8BD,EAA9BC,IAAKgF,EAAyBjF,EAAzBiF,KAAM9D,EAAmBnB,EAAnBmB,KAAM8F,EAAajH,EAAbiH,SADM,cAEAD,EAFA,GAExBE,EAFwB,KAEfC,EAFe,KAGzBzC,EAAWC,cAGjB,OACE,yBAAKlB,UAAS,cAAS0D,EAAYC,MAAK,SAAAjB,GAAE,OAAKA,KAAM,cAAgB,IAAMvB,QAH7D,kBAAMF,EAASvB,EAAUlD,MAIrC,yBAAKwD,UAAU,cACZM,QAAQ5C,IAAS,yBAAKsC,UAAU,aAAatC,GAC9C,kBAAC,EAAD,CACE8D,KAA0B,IAApBgC,EAAS1C,OAAe0C,EAAS,GAAGhC,KAAOA,EACjDU,SAA8B,IAApBsB,EAAS1C,OAAe0C,EAAS,GAAGtB,SAAW,KACzDD,QAA6B,IAApBuB,EAAS1C,OAAe0C,EAAS,GAAGvB,QAAU,KACvDE,KAA0B,IAApBqB,EAAS1C,OAAe0C,EAAS,GAAGrB,KAAO,KACjDgB,OAAQM,EACRL,OAAO,SAGTI,EAAS1C,OAAS,GAClB,yBAAKd,UAAU,iBACZwD,EAASnF,KAAI,SAACuF,EAASC,GAAV,OACZ,kBAAC,EAAD,CACEC,IAAG,UAAKF,EAAQpC,KAAb,YAAqBqC,GACxBrC,KAAMoC,EAAQpC,KACdU,SAAU0B,EAAQ1B,SAClBD,QAAS2B,EAAQ3B,QACjBE,KAAMyB,EAAQzB,KACdgB,OAAQO,EAAYG,WCpCnBE,GA1BH,SAAC,GAAc,IPUHC,EOVT1F,EAAW,EAAXA,KAAW,EACMkC,oBAAS,GADf,mBAChBY,EADgB,KACR6C,EADQ,KAElBtJ,EAAQqG,aPQQgD,EORa1F,EPQN,SAAAH,GAAK,OAAIA,EAAMxD,MAAMiC,QAAO,SAAAL,GAAI,OAAIA,EAAK+B,OAAS0F,KAAKzF,KAAKR,MOPnFmG,EAAWvJ,EAAM0D,KAAI,SAAA9B,GAAI,OAAIA,EAAKiH,SAASnF,IAAI2D,MAAmB3D,KAAI,SAAA9B,GAAI,MAAI,CAACA,EAAK4H,OAAO7B,GAAM/F,MACjG6H,EAASF,EAAS7F,IAAIoE,GAAO0B,OAAO7B,GAG1C,OACE,yBAAKtC,UAAU,OACb,yBAAKA,UAAU,YAAYmB,QAJb,kBAAM8C,GAAU,SAAA7C,GAAM,OAAKA,OAKvC,yBAAKpB,UAAU,kBAAkBqE,EAAO/F,GAAMgG,OAAO,iBACpDhE,QAAQ8D,IAAW,yBAAKpE,UAAU,oBAAoBoE,EAAnC,8BAEtB,yBAAKpE,UAAS,mBAAcoB,EAAS,GAAK,sBACvCzG,EAAM0D,KAAI,SAAC9B,EAAMsH,GAAP,OACT,kBAAC,GAAD,CACEC,IAAKvH,EAAKC,IACVD,KAAMA,EACNgH,KAAMW,EAASL,WCcZU,GAlCC,WACd,IAAM3J,EAASoG,YAAYrC,GACrB6F,EAAOxD,YAAY9C,GAuBzB,OACE,yBAAK8B,UAAU,WACb,yBAAKA,UAAU,qBAtBF,YAAXpF,EACK,mDACa,UAAXA,EACF,uCAGJ4J,EAAK1D,OAMH0D,EAAKnG,KAAI,SAAAC,GAAI,OAClB,kBAAC,GAAD,CACEwF,IAAKxF,EACLA,KAAMA,OAPN,uBAAG0B,UAAU,QAAb,mPCLOyE,GATA,WACb,IAAMxD,EAAWC,cAGjB,OACE,yBAAKlB,UAAU,eAAemB,QAHhB,kBAAMF,EAASvB,S,kBCJjC,SAASgF,GAAejC,EAAOkC,EAAM3E,GACnC,MAAM,QAAN,OAAgByC,EAAyC,GAAjC,gCAAxB,OAA+DkC,EAA0B,GAAnB,kBAAtE,OAA8F3E,EAAS,WAAOA,GAAc,IAGvH,IAAM4E,GAAQ,SAAC,GAAmD,IAAjDC,EAAgD,EAAhDA,MAAOrD,EAAyC,EAAzCA,KAAMsD,EAAmC,EAAnCA,YAAaC,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,SACvD,OACE,2BAAOhF,UAAU,cACf,yBAAKA,UAAU,cAAc6E,GAC7B,2BAAOrD,KAAMA,EAAMW,KAAK,OAAO4C,MAAOA,EAAO/E,UAAU,QAAQ8E,YAAaA,EAAaE,SAAUA,MAK5FC,GAAS,SAAC,GAAD,IAAGzD,EAAH,EAAGA,KAAMuD,EAAT,EAASA,MAAOG,EAAhB,EAAgBA,QAAhB,IAAyBzC,aAAzB,aAAwCkC,YAAxC,aAAsD3E,iBAAtD,MAAkE,GAAlE,EAAsEgF,EAAtE,EAAsEA,SAAtE,OACpB,yBAAKhF,UAAU,YACb,4BACEwB,KAAMA,EACNuD,MAAOA,EACP/E,UAAW0E,GAAejC,EAAOkC,EAAM3E,GACvCgF,SAAUA,GAETvI,OAAO0I,QAAQD,GAAS7G,KAAI,mCAAEyF,EAAF,KAAOiB,EAAP,YAC3B,4BAAQjB,IAAKA,EAAKiB,MAAOjB,GAAMiB,OAGnC,yBAAK/E,UAAU,uFACb,yBAAKA,UAAU,uBAAuBE,MAAM,6BAA6BC,QAAQ,aAC/E,0BAAMC,EAAE,mFAMHgF,GAAQ,SAAC,GAAD,QAAG3C,aAAH,aAAkBkC,YAAlB,SAAgCU,EAAhC,EAAgCA,SAAhC,OACnB,0BAAMrF,UAAW0E,GAAejC,EAAOkC,EAAR,2BAA0CU,IAG9DC,GAAQ,SAAC,GAAD,IAAG9D,EAAH,EAAGA,KAAMuD,EAAT,EAASA,MAAT,IAAgBtC,aAAhB,aAA+BkC,YAA/B,aAA6C3E,iBAA7C,MAAyD,GAAzD,EAA6DgF,EAA7D,EAA6DA,SAA7D,OACnB,2BACE7C,KAAK,OACLnC,UAAW0E,GAAejC,EAAOkC,EAAM3E,GACvCwB,KAAMA,EACNuD,MAAOA,EACPC,SAAUA,KAIDO,GAAa,SAAC,GAAyB,IAAvBV,EAAsB,EAAtBA,MAAOQ,EAAe,EAAfA,SAClC,OACE,2BAAOrF,UAAU,cACf,yBAAKA,UAAU,cAAc6E,GAC7B,yBAAK7E,UAAU,QACZqF,KC9CMG,GAND,SAAC,GAAD,IAAGxF,EAAH,EAAGA,UAAH,OACZ,yBAAKA,UAAWA,EAAWE,MAAM,6BAA6BC,QAAQ,iBACpE,0BAAMC,EAAE,ylBCONqF,GAAa,CACjB,QAAW,yCACX,MAAS,iBACT,KAAQ,mBACR,WAAc,oBAGVC,GAAiB,CACrB,QAAW,2BACX,MAAS,eACT,KAAQ,eACR,WAAc,gBAGVC,GAAiB,CACrBnE,KAAM,GACNS,QAAS,GACTE,KAAM,UACND,SAAU,IAuJG0D,GApJF,WACX,IAAMC,EAAMxB,IACNpD,EAAWC,cACX4E,EAAU9E,YAAYtC,GAkBtBqH,EAAW,SAAAjL,GACfmG,EAASrB,KACTqB,EXkBsB,SAAAnG,GAAE,OAAI,SAACmG,EAAU+E,EAAUnJ,GACnD,OAAOoJ,MAAM,GAAD,OAAIC,8CAAJ,sBAAmDpL,EAAnD,qBAAkE+B,EAAasJ,UAAY,CAAEC,OAAQ,SAC9GrE,MAAK,SAAAsE,GAAQ,OAAIA,EAASC,UAC1BvE,MAAK,SAAAsE,GACJ,OAAIA,EAASE,IACJC,QAAQC,IAAIJ,EAASE,KAEvBtF,EAAS3B,EAAkB+G,QWzB3BK,CAAW5L,IACjBiH,MAAK,kBAAMd,EAASpB,QACpBkC,MAAK,kBAAMd,EAAStB,QACpBgH,OAAM,SAAC3I,EAAEC,EAAE2I,GACVJ,QAAQC,IAAI,QAASzI,EAAGC,EAAG2I,GAC3B3F,EAASnB,SA5BE,EAgC0D+G,aAAU,CACnFC,cAAe9F,YAAYpC,IAAoB,CAC7C4C,KAAM,GACNlD,KAAMuH,EAAIvB,OAAO,cACjB5G,KAAMmI,EAAIvB,OAAO,SACjBd,SAAU,CAAC,eAAKmC,MAElBoB,SAnCe,SAAAC,GAAW,IAClBxK,EAAiBwK,EAAjBxK,IAAQD,EADS,aACAyK,EADA,SAEzB/F,EAASrB,KACTqB,EAASzE,EXea,SAAC1B,EAAIyB,GAAL,OAAc,SAAC0E,EAAU+E,EAAUnJ,GAE3D,OAAOoJ,MAAM,GAAD,OAAIC,8CAAJ,sBAAmDpL,EAAnD,qBAAkE+B,EAAasJ,UAAY,CACrGC,OAAQ,OACRa,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU7K,KAEpBwF,MAAK,SAAAsE,GAAQ,OAAIA,EAASC,UAC1BvE,MAAK,SAAAsE,GACJ,OAAIA,EAASE,IACJC,QAAQC,IAAIJ,EAASE,KAEvBtF,EAAS5B,EAAkBgH,QW7BrBgB,CAAW7K,EAAKD,GXHT,SAAAA,GAAI,OAAI,SAAC0E,EAAU+E,EAAUnJ,GACrD,OAAOoJ,MAAM,GAAD,OAAIC,8CAAJ,4BAAyDrJ,EAAasJ,UAAY,CAC5FC,OAAQ,OACRa,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU7K,KAEpBwF,MAAK,SAAAsE,GAAQ,OAAIA,EAASC,UAC1BvE,MAAK,SAAAsE,GACJ,OAAIA,EAASE,IACJC,QAAQC,IAAIJ,EAASE,KAEvBtF,EAAS7B,EAAkBiH,QWVGiB,CAAW/K,IAC/CwF,MAAK,SAAC/D,EAAEC,EAAE2I,GACTJ,QAAQC,IAAI,gBAAiBzI,EAAGC,EAAG2I,GACnC3F,EAASpB,QAEVkC,MAAK,SAAC/D,EAAEC,EAAE2I,GACTJ,QAAQC,IAAI,cAAezI,EAAGC,EAAG2I,GACjC3F,EAAStB,QAEVgH,OAAM,SAAC3I,EAAEC,EAAE2I,GACVJ,QAAQC,IAAI,QAASzI,EAAGC,EAAG2I,GAC3B3F,EAASnB,SAsBbyH,QATc,kBAAMtG,EAAStB,QACvBqH,EAhCS,EAgCTA,OAAQQ,EAhCC,EAgCDA,cAAeC,EAhCd,EAgCcA,aAAcC,EAhC5B,EAgC4BA,aAAcC,EAhC1C,EAgC0CA,YAWrDC,EAAeZ,EAAOxD,SAAS1C,OAE/B+G,EAAa,WACjBL,EAAc,WAAYR,EAAOxD,SAASrH,OAAhB,eAA4BwJ,OAOxD,OACE,0BAAMoB,SAAUU,EAAczH,UAAS,cAAS8F,EAAU,gBAAkB,KACzEA,GAAW,kBAAC,EAAD,MACZ,yBAAK9F,UAAU,kBACb,yBAAKA,UAAU,cACZgH,EAAOxK,IAAM,yIAA6B,4GAE7C,kBAAC,GAAD,CACEgF,KAAK,OACLqD,MAAM,2BACNC,YAAY,qDACZC,MAAOiC,EAAO1I,KACd0G,SAAU0C,IAEZ,kBAAC,GAAD,CACElG,KAAK,OACLqD,MAAM,iCACNC,YAAY,4BACZC,MAAOiC,EAAOtJ,KACdsH,SAAU0C,IAEXjL,OAAOuK,OAAOA,EAAOxD,UAAUnF,KAAI,SAACuF,EAASkE,GAC5C,OACE,yBAAK9H,UAAU,SAAS8D,IAAG,kBAAagE,IACtC,kBAAC,GAAD,CACEtG,KAAI,mBAAcsG,EAAd,UACJjD,MAAM,mDACNE,MAAOiC,EAAOxD,SAASsE,GAAGtG,KAC1BwD,SAAU0C,IAEZ,kBAAC,GAAD,CAAY7C,MAAM,4EAChB,kBAAC,GAAD,CACEE,MAAOiC,EAAOxD,SAASsE,GAAG7F,QAC1B+C,SAAU0C,EACVlG,KAAI,mBAAcsG,EAAd,aACJrF,OAAO,IAET,kBAAC,GAAD,qBACA,kBAAC,GAAD,CACEzC,UAAU,yCACV+E,MAAOiC,EAAOxD,SAASsE,GAAG3F,KAC1B6C,SAAU0C,EACVlG,KAAI,mBAAcsG,EAAd,UACJnD,MAAM,EACNO,QAASO,MAGb,kBAAC,GAAD,CAAYZ,MAAM,gEAChB,kBAAC,GAAD,CACEE,MAAOiC,EAAOxD,SAASsE,GAAG5F,SAC1B8C,SAAU0C,EACVlG,KAAI,mBAAcsG,EAAd,cAA6BrF,OAAO,IAE1C,kBAAC,GAAD,CAAOkC,MAAM,GAAOe,GAAesB,EAAOxD,SAASsE,GAAG3F,QAExD,yBAAKnC,UAAU,wBACX8H,IAAMF,EAAe,GACrB,4BAAQzF,KAAK,SAASnC,UAAU,WAAWmB,QAAS0G,GAApD,uEAEAD,EAAe,GACf,4BAAQzF,KAAK,SAASnC,UAAU,cAAcmB,SAhExC0C,EAgE+DiE,EAhEtD,WAC7BN,EAAc,WAAYR,EAAOxD,SAAS5G,QAAO,SAACmL,EAAGC,GAAJ,OAAqBnE,IAAUmE,SA+DlE,gDAhEM,IAAAnE,KAsEd+D,EAAe,GACf,kBAAC,GAAD,CACE/C,MAAM,iHACNrD,KAAK,OACLuD,MAAOiC,EAAOxF,KACdwD,SAAU0C,KAIhB,yBAAK1H,UAAU,eAEZgH,EAAOxK,KACN,4BACE2E,QAAS,kBAAM4E,EAASiB,EAAOxK,MAC/B2F,KAAK,SACLnC,UAAU,mBAEV,kBAAC,GAAD,CAAOA,UAAU,gBAGrB,yBAAKA,UAAU,gBACb,4BAAQmC,KAAK,SAAShB,QAASwG,EAAa3H,UAAU,qCAAtD,wCACA,4BAAQmC,KAAK,SAASnC,UAAU,eAAhC,8DCzIKiI,GA9BD,SAAC,GAAiB,EAAf5C,SAAgB,IACzB6C,EAAclH,YAAYvC,GAgBhC,OAdA0J,qBAAU,WACR,GAAKD,EAOL,OAHAE,SAASlB,KAAKmB,MAAMC,aRdjB,WAEL,IAAMC,EAAQH,SAASI,cAAc,OACrCD,EAAMF,MAAMI,WAAa,SACzBF,EAAMF,MAAMK,SAAW,SACvBH,EAAMF,MAAMM,gBAAkB,YAC9BP,SAASlB,KAAK0B,YAAYL,GAG1B,IAAMM,EAAQT,SAASI,cAAc,OACrCD,EAAMK,YAAYC,GAGlB,IAAMC,EAAkBP,EAAMQ,YAAcF,EAAME,YAKlD,OAFAR,EAAMS,WAAWC,YAAYV,GAEtBO,EQJ8BI,GAAsB,KACzDd,SAASlB,KAAKiC,UAAUC,IAAI,eAErB,WACLhB,SAASlB,KAAKiC,UAAUE,OAAO,eAC/BjB,SAASlB,KAAKmB,MAAMC,aAAe,OAEpC,CAACJ,IAECA,EAKH,yBAAKlI,UAAU,SACb,yBAAKA,UAAU,cACb,kBAAC,GAAD,QANG,MCYIsJ,GAxBF,WACX,IAAMrI,EAAWC,cACXtG,EAASoG,YAAYrC,GAM3B,OAJAwJ,qBAAU,WACRlH,GbG2B,SAACA,EAAU+E,EAAUnJ,GAClD6E,OAAOsE,SAAWA,EAClB/E,EAASjC,KACPiH,MAAM,GAAD,OAAIC,8CAAJ,0BAAuDrJ,EAAasJ,WACtEpE,MAAK,SAAAsE,GAAQ,OAAIA,EAASkD,GAAKlD,EAASC,OAASrF,EAAS9B,QAC1D4C,MAAK,YAA4B,IAAzByH,EAAwB,EAAxBA,MAAOxO,EAAiB,EAAjBA,KAAMyO,EAAW,EAAXA,KACpB,GAAID,EAEF,OADA3M,EAAaM,aACN8D,EAASzB,KAElByB,EAAS/B,EAAiBuK,IAC1BxI,EAASxB,EAAYzE,OAEtB2L,OAAM,kBAAM1F,EAAS9B,aafvB,IAEY,YAAXvE,EACK,kBAAC,EAAD,MACa,UAAXA,EACF,uCAIP,yBAAKoF,UAAU,OACb,kBAAC,EAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,QCzBAK,GAAS,mVACZ1C,MAAM,oCAAoCf,OAAO0D,SAmCrCoJ,GAjCF,WAAO,IAAD,EACIlJ,oBAAS,kBAAMG,KAAKC,MAAMD,KAAKE,SAAWR,GAAOS,WAA/DC,EADU,oBAEXE,EAAWC,cAWjB,OACE,yBAAKlB,UAAU,2CACb,yBAAKA,UAAU,0EACb,uBAAGA,UAAU,YAAYK,GAAOU,IAChC,uBAAGf,UAAU,0BAAb,WACA,uBAAGA,UAAU,QAAb,gQACA,4BAAQmB,QAfC,WACCO,OAAOC,KAAKC,MAAMC,kBAC1B8H,SAAS5H,MAAK,SAAA6H,GAClB,IAAMC,EAAWD,EAAWE,kBAAkBD,SAC9ChN,EAAaG,SAAS6M,GACtB5I,EAAS1B,SAUkBS,UAAU,gKACjC,yBAAKA,UAAU,eAAeE,MAAM,6BAA6BC,QAAQ,mBACvE,0BAAMC,EAAE,+HAA+H2J,KAAK,YAC5I,0BAAM3J,EAAE,yJAAyJ2J,KAAK,YACtK,0BAAM3J,EAAE,8FAA8F2J,KAAK,YAC3G,0BAAM3J,EAAE,mJAAmJ2J,KAAK,aALpK,8FCEOC,OApBf,WACE,IAAM/M,EAAQJ,EAAasJ,SACrB8D,EAAiBjJ,YAAYjC,GAC7BkC,EAAWC,cAMjB,OAJIjE,GACFgE,EAAS1B,KAGP0K,EAEA,kBAAC,GAAD,MAKF,kBAAC,GAAD,O,MCdJ5F,SAAc,MAEd6F,IAASC,OACP,kBAAC,IAAD,CAAU9O,MAAOA,GACf,kBAAC,GAAD,OAEF+M,SAASgC,eAAe,W","file":"static/js/main.c61a0bb8.chunk.js","sourcesContent":["import { handleActions } from \"redux-actions\";\r\n\r\nconst initialState = {\r\n  meals: [],\r\n  status: null,\r\n  modal: false,\r\n  id: null,\r\n  modalStatus: null,\r\n  user: null,\r\n  isAuthorized: null,\r\n};\r\n\r\nconst reducer = handleActions({\r\n  LOGIN: store => ({ ...store, isAuthorized: true }),\r\n  LOGOUT: () => ({ ...initialState }),\r\n  SET_USER_DATA: (store, action) => ({ ...store, user: action.payload }),\r\n\r\n  LOAD_MEALS_REQUEST: store => ({ ...store, status: 'loading' }),\r\n  LOAD_MEALS_SUCCESS: (store, action) => ({ ...store, meals: action.payload, status: null }),\r\n  LOAD_MEALS_FAILURE: store => ({ ...store, status: 'failed' }),\r\n\r\n  OPEN_MODAL: (store, action) => ({ ...store, modal: true, id: action.payload }),\r\n  CLOSE_MODAL: store => ({ ...store, modal: false, id: null }),\r\n  MODAL_REQUEST: store => ({ ...store, modalStatus: 'loading' }),\r\n  MODAL_SUCCESS: store => ({ ...store, modalStatus: null }),\r\n  MODAL_FAILURE: store => ({ ...store, modalStatus: 'failed' }),\r\n\r\n  CREATE_MEAL_SUCCESS: (store, action) => ({\r\n    ...store,\r\n    meals: store.meals.concat(action.payload),\r\n  }),\r\n\r\n  UPDATE_MEAL_SUCCESS: (store, action) => {\r\n    const mealIndex = store.meals.findIndex(meal => meal._id === action.payload._id);\r\n\r\n    return {\r\n      ...store,\r\n      meals: Object.assign([], store.meals, { [mealIndex]: action.payload }),\r\n    };\r\n  },\r\n\r\n  DELETE_MEAL_SUCCESS: (store, action) => ({\r\n    ...store,\r\n    meals: store.meals.filter(meal => meal._id !== action.payload._id),\r\n  }),\r\n\r\n}, initialState);\r\n\r\nexport default reducer;\r\n","const TOKEN_KEY  = 'id_token';\r\n\r\nconst tokenStorage = {\r\n  get getToken() {\r\n    return localStorage.getItem(TOKEN_KEY);\r\n  },\r\n  setToken(token) {\r\n    localStorage.setItem(TOKEN_KEY, token);\r\n  },\r\n  clearToken() {\r\n    localStorage.removeItem(TOKEN_KEY);\r\n  },\r\n};\r\n\r\nexport default tokenStorage;\r\n","import { applyMiddleware, createStore, combineReducers } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport reducer  from \"./reducer\";\r\nimport tokenStorage from \"../utils/token\";\r\n\r\nconst store = createStore(reducer, applyMiddleware(thunk.withExtraArgument(tokenStorage)));\r\n\r\nexport default store;","const timeToMinutes = time => {\r\n  const [hours, minutes] = time.split(':');\r\n\r\n  return hours * 60 + parseInt(minutes);\r\n};\r\n\r\nconst sortByTime = (a, b) => {\r\n  if (!a.time) {\r\n    return -1;\r\n  } else if (!b.time) {\r\n    return 1;\r\n  }\r\n\r\n  return timeToMinutes(b.time) - timeToMinutes(a.time);\r\n};\r\n\r\nexport const getDays = state => [...(new Set(state.meals.map(meal => meal.date)))].sort().reverse();\r\nexport const getMeals = day => state => state.meals.filter(meal => meal.date === day).sort(sortByTime);\r\nexport const isModalActive = state => state.modal;\r\nexport const getModalStatus = state => state.modalStatus;\r\nexport const getStatus = state => state.status;\r\nexport const getSelectedMeal = state => state.meals.find(meal => meal._id === state.id);\r\nexport const getUserData = state => state.user;\r\nexport const getIsAuthorized = state => state.isAuthorized;\r\n","import { createAction } from 'redux-actions';\r\n\r\nconst loadMealsRequest = createAction('LOAD_MEALS_REQUEST');\r\nconst loadMealsSuccess = createAction('LOAD_MEALS_SUCCESS');\r\nconst loadMealsFailure = createAction('LOAD_MEALS_FAILURE');\r\n\r\nconst createMealSuccess = createAction('CREATE_MEAL_SUCCESS');\r\nconst updateMealSuccess = createAction('UPDATE_MEAL_SUCCESS');\r\nconst deleteMealSuccess = createAction('DELETE_MEAL_SUCCESS');\r\n\r\nexport const login = createAction('LOGIN');\r\nexport const logout = createAction('LOGOUT');\r\nexport const setUserData = createAction('SET_USER_DATA');\r\n\r\nexport const openModal = createAction('OPEN_MODAL');\r\nexport const closeModal = createAction('CLOSE_MODAL');\r\nexport const modalRequest = createAction('MODAL_REQUEST');\r\nexport const modalSuccess = createAction('MODAL_SUCCESS');\r\nexport const modalFailure = createAction('MODAL_FAILURE');\r\n\r\nexport const loadMeals = () => (dispatch, getState, tokenStorage) => {\r\n  window.getState = getState;\r\n  dispatch(loadMealsRequest());\r\n    fetch(`${process.env.REACT_APP_BACKEND_URL}/read?id_token=${tokenStorage.getToken}`)\r\n      .then(response => response.ok ? response.json() : dispatch(loadMealsFailure()))\r\n      .then(({ error, user, data }) => {\r\n        if (error) {\r\n          tokenStorage.clearToken();\r\n          return dispatch(logout());\r\n        }\r\n        dispatch(loadMealsSuccess(data));\r\n        dispatch(setUserData(user));\r\n      })\r\n      .catch(() => dispatch(loadMealsFailure()))\r\n};\r\n\r\nexport const createMeal = meal => (dispatch, getState, tokenStorage) => {\r\n  return fetch(`${process.env.REACT_APP_BACKEND_URL}/create?id_token=${tokenStorage.getToken}`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify(meal),\r\n  })\r\n    .then(response => response.json())\r\n    .then(response => {\r\n      if (response.err) {\r\n        return console.log(response.err);\r\n      }\r\n      return dispatch(createMealSuccess(response));\r\n    })\r\n    //.catch(() => dispatch(loadMealsFailure()));\r\n};\r\n\r\nexport const updateMeal = (id, meal) => (dispatch, getState, tokenStorage) => {\r\n  //fetch('http://localhost:5000/update?id=' + id, {\r\n  return fetch(`${process.env.REACT_APP_BACKEND_URL}/update?id=${id}&id_token=${tokenStorage.getToken}`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify(meal),\r\n  })\r\n    .then(response => response.json())\r\n    .then(response => {\r\n      if (response.err) {\r\n        return console.log(response.err);\r\n      }\r\n      return dispatch(updateMealSuccess(response));\r\n    })\r\n  //.catch(() => dispatch(loadMealsFailure()));\r\n};\r\n\r\nexport const deleteMeal = id => (dispatch, getState, tokenStorage) => {\r\n  return fetch(`${process.env.REACT_APP_BACKEND_URL}/delete?id=${id}&id_token=${tokenStorage.getToken}`, { method: 'POST' })\r\n    .then(response => response.json())\r\n    .then(response => {\r\n      if (response.err) {\r\n        return console.log(response.err);\r\n      }\r\n      return dispatch(deleteMealSuccess(response));\r\n    })\r\n  //.catch(() => dispatch(loadMealsFailure()));\r\n};\r\n","import React from \"react\";\r\n\r\nconst Spinner = ({ className }) => (\r\n  <div className=\"Spinner\" />\r\n);\r\n\r\nexport default Spinner;\r\n","import React from \"react\";\r\n\r\nconst Arrow = ({ className }) => (\r\n  <svg className={className} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\r\n    <path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"/>\r\n  </svg>\r\n);\r\n\r\nexport default Arrow;\r\n","import React, { useState } from 'react';\r\nimport Arrow from \"./Arrow\";\r\nimport {useSelector, useDispatch} from \"react-redux\";\r\nimport {getUserData} from \"../store/selectors\";\r\nimport {logout} from \"../store/actions\";\r\nimport tokenStorage from \"../utils/token\";\r\n\r\nconst emojis = '🥕🥦🥬🍽🍴🥄🥢🍰🧁🍥🥘🍲🍜🍙🍱🍗🍖🥩🍕🍔🍟🌭🥓🧇🥞🧀🥗🥠'\r\n  .split(/([\\uD800-\\uDBFF][\\uDC00-\\uDFFF])/).filter(Boolean);\r\n\r\nconst Header = () => {\r\n  const [dropdownActive, setDropdownActive] = useState(false);\r\n  const [emojiIndex] = useState(() => Math.floor(Math.random() * emojis.length));\r\n  const onClick = () => setDropdownActive(active => !active);\r\n  const user = useSelector(getUserData);\r\n  const dispatch = useDispatch();\r\n\r\n  const onLogout = () => {\r\n    const auth2 = window.gapi.auth2.getAuthInstance();\r\n    auth2.signOut().then(() => {\r\n      tokenStorage.clearToken();\r\n      dispatch(logout());\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"Header\">\r\n      <div className=\"Header-Logo\">{emojis[emojiIndex]} FoodLog</div>\r\n      {user && (\r\n        <div className=\"Header-Profile\">\r\n          <div className=\"Header-ProfileCard\" onClick={onClick}>\r\n            <img className=\"Header-ProfileImage\" src={user.picture} alt=\"\"/>\r\n            <Arrow className=\"Header-ProfileArrow\" />\r\n          </div>\r\n          {dropdownActive && (\r\n            <div className=\"Header-ProfileDropdown\">\r\n              <div className=\"Header-ProfileInfo\">\r\n                <p className=\"Header-ProfileName\">{user.name}</p>\r\n                <p className=\"Header-ProfileEmail\">{user.email}</p>\r\n              </div>\r\n              <ul className=\"Header-ProfileMenu\">\r\n                <li><button onClick={onLogout} className=\"Header-ProfileLink\">Выйти</button></li>\r\n              </ul>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","export function getScrollbarWidth() {\r\n  // Creating invisible container\r\n  const outer = document.createElement('div');\r\n  outer.style.visibility = 'hidden';\r\n  outer.style.overflow = 'scroll'; // forcing scrollbar to appear\r\n  outer.style.msOverflowStyle = 'scrollbar'; // needed for WinJS apps\r\n  document.body.appendChild(outer);\r\n\r\n  // Creating inner element and placing it in the container\r\n  const inner = document.createElement('div');\r\n  outer.appendChild(inner);\r\n\r\n  // Calculating difference between container's full width and the child width\r\n  const scrollbarWidth = (outer.offsetWidth - inner.offsetWidth);\r\n\r\n  // Removing temporary elements from the DOM\r\n  outer.parentNode.removeChild(outer);\r\n\r\n  return scrollbarWidth;\r\n}\r\n\r\nexport function plural(forms, n) {\r\n  let idx;\r\n  // @see http://docs.translatehouse.org/projects/localization-guide/en/latest/l10n/pluralforms.html\r\n  if (n % 10 === 1 && n % 100 !== 11) {\r\n    idx = 0; // many\r\n  } else if (n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20)) {\r\n    idx = 1; // few\r\n  } else {\r\n    idx = 2; // one\r\n  }\r\n  return forms[idx] || '';\r\n}\r\n\r\nexport const calculateProduct = ({ calorie, quantity, type }) => (\r\n  Math.round(calorie * quantity / ((['milliliter', 'gram'].indexOf(type) > -1) * 99 + 1))\r\n);\r\n\r\nexport const sum = (acc, val) => acc + val;\r\n\r\nexport const first = el => el[0];\r\n","import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { openModal } from '../store/actions';\r\nimport { plural } from '../utils';\r\n\r\nconst locales = {\r\n  quantity: {\r\n    'portion': ['порция', 'порции', 'порций'],\r\n    'piece': 'шт',\r\n    'milliliter': 'мл',\r\n    'gram': 'гр',\r\n  },\r\n  calorie: {\r\n    'portion': 'ккал / порция',\r\n    'piece': 'ккал / шт',\r\n    'milliliter': 'ккал / 100 мл',\r\n    'gram': 'ккал / 100 гр',\r\n  },\r\n};\r\n\r\nconst getLocale = (count, field, type) => {\r\n  if (!locales[field] || !locales[field][type]) {\r\n    return count;\r\n  }\r\n\r\n  return `${count} ${Array.isArray(locales[field][type]) ? plural(locales[field][type], count) : locales[field][type]}`;\r\n};\r\n\r\nconst CardProduct = ({ name, quantity, calorie, amount, design, type }) => (\r\n  <div className={`Card-Product Card-Product_${design}`}>\r\n    <div className=\"Card-ProductInfo\">\r\n      <div className=\"Card-ProductInfo2\">\r\n        <div className=\"Card-ProductName\">{name.substr(0, 500)}</div>\r\n        {quantity && <div className=\"Card-ProductQuantity\">{getLocale(quantity, 'quantity', type)}</div>}\r\n      </div>\r\n      {calorie && <div className=\"Card-ProductCalorie\">{getLocale(calorie, 'calorie', type)}</div>}\r\n    </div>\r\n    {Boolean(amount) && <div className={`Card-ProductSummary Card-ProductSummary_${design}`}>{amount} ккал</div>}\r\n  </div>\r\n);\r\n\r\nconst Card = ({ meal, sums }) => {\r\n  const { _id, name, time, products } = meal;\r\n  const [mealSum, productSums] = sums;\r\n  const dispatch = useDispatch();\r\n  const onClick = () => dispatch(openModal(_id));\r\n\r\n  return (\r\n    <div className={`Card${productSums.some(el => !el) ? ' Card_draft' : ''}`} onClick={onClick}>\r\n      <div className=\"Card-Title\">\r\n        {Boolean(time) && <div className=\"Card-Time\">{time}</div>}\r\n        <CardProduct\r\n          name={products.length === 1 ? products[0].name : name}\r\n          quantity={products.length === 1 ? products[0].quantity : null}\r\n          calorie={products.length === 1 ? products[0].calorie : null}\r\n          type={products.length === 1 ? products[0].type : null}\r\n          amount={mealSum}\r\n          design=\"alt\"\r\n        />\r\n      </div>\r\n      {(products.length > 1) && (\r\n        <div className=\"Card-Products\">\r\n          {products.map((product, index) => (\r\n            <CardProduct\r\n              key={`${product.name}-${index}`}\r\n              name={product.name}\r\n              quantity={product.quantity}\r\n              calorie={product.calorie}\r\n              type={product.type}\r\n              amount={productSums[index]}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n","import React, { useState } from 'react';\r\nimport Card from \"./Card\";\r\nimport * as moment from 'moment';\r\nimport { getMeals } from '../store/selectors';\r\nimport { useSelector } from 'react-redux';\r\nimport { calculateProduct, sum, first } from '../utils';\r\n\r\nconst Day = ({ date }) => {\r\n  const [ active, setActive ] = useState(true);\r\n  const meals = useSelector(getMeals(date));\r\n  const mealSums = meals.map(meal => meal.products.map(calculateProduct)).map(meal => [meal.reduce(sum), meal]);\r\n  const daySum = mealSums.map(first).reduce(sum);\r\n  const toggleDay = () => setActive(active => !active);\r\n\r\n  return (\r\n    <div className=\"Day\">\r\n      <div className=\"Day-Title\" onClick={toggleDay}>\r\n        <div className=\"Day-TitleLabel\">{moment(date).format('DD MMMM YYYY')}</div>\r\n        {Boolean(daySum) && <div className=\"Day-TitleSummary\">{daySum} ккал</div>}\r\n      </div>\r\n      <div className={`Day-Cards${active ? '' : ' Day-Cards_hidden'}`}>\r\n        {meals.map((meal, index) => (\r\n          <Card\r\n            key={meal._id}\r\n            meal={meal}\r\n            sums={mealSums[index]}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Day;\r\n","import React from \"react\";\r\nimport Day from \"./Day\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getDays, getStatus } from \"../store/selectors\";\r\n\r\nconst Content = () => {\r\n  const status = useSelector(getStatus);\r\n  const days = useSelector(getDays);\r\n\r\n  const renderBody = () => {\r\n    if (status === 'loading') {\r\n      return 'Загрузка';\r\n    } else if (status === 'error') {\r\n      return 'Ошибка';\r\n    }\r\n\r\n    if (!days.length) {\r\n      return (\r\n        <p className=\"mt-5\">Приемов пищи нет. Самое время добавить первый!</p>\r\n      );\r\n    }\r\n\r\n    return days.map(date => (\r\n      <Day\r\n        key={date}\r\n        date={date}\r\n      />\r\n    ));\r\n  };\r\n\r\n  return (\r\n    <div className=\"Content\">\r\n      <div className=\"container mx-auto\">\r\n        {renderBody()}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Content;\r\n","import React  from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { openModal } from \"../store/actions\";\r\n\r\nconst AddNew = () => {\r\n  const dispatch = useDispatch();\r\n  const onClick = () => dispatch(openModal());\r\n\r\n  return (\r\n    <div className=\"AddNewButton\" onClick={onClick} />\r\n  );\r\n};\r\n\r\nexport default AddNew;\r\n","import React from \"react\";\r\n\r\nfunction inputClassName(first, last, className) {\r\n  return `Input${!first ? ' Input_noBorder Input_noLeft' : ''}${!last ? ' Input_noRight' : ''}${className ? ` ${className}` : ''}`;\r\n}\r\n\r\nexport const Field = ({ title, name, placeholder, value, onChange }) => {\r\n  return (\r\n    <label className=\"Form-Field\">\r\n      <div className=\"Form-Label\">{title}</div>\r\n      <input name={name} type=\"text\" value={value} className=\"Input\" placeholder={placeholder} onChange={onChange} />\r\n    </label>\r\n  );\r\n};\r\n\r\nexport const Select = ({ name, value, options, first = false, last = false, className = '', onChange }) => (\r\n  <div className=\"relative\">\r\n    <select\r\n      name={name}\r\n      value={value}\r\n      className={inputClassName(first, last, className)}\r\n      onChange={onChange}\r\n    >\r\n      {Object.entries(options).map(([key, value]) => (\r\n        <option key={key} value={key}>{value}</option>\r\n      ))}\r\n    </select>\r\n    <div className=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\r\n      <svg className=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\r\n        <path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"/>\r\n      </svg>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport const Label = ({ first = false, last = false, children }) => (\r\n  <span className={inputClassName(first, last, ` Input_disabled w-auto`)}>{children}</span>\r\n);\r\n\r\nexport const Input = ({ name, value, first = false, last = false, className = '', onChange }) => (\r\n  <input\r\n    type=\"text\"\r\n    className={inputClassName(first, last, className)}\r\n    name={name}\r\n    value={value}\r\n    onChange={onChange}\r\n  />\r\n);\r\n\r\nexport const FieldGroup = ({ title, children }) => {\r\n  return (\r\n    <label className=\"Form-Field\">\r\n      <div className=\"Form-Label\">{title}</div>\r\n      <div className=\"flex\">\r\n        {children}\r\n      </div>\r\n    </label>\r\n  );\r\n};\r\n","import React from \"react\";\r\n\r\nconst Trash = ({ className }) => (\r\n  <svg className={className} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1792 1792\">\r\n    <path d=\"M704 736v576q0 14-9 23t-23 9h-64q-14 0-23-9t-9-23V736q0-14 9-23t23-9h64q14 0 23 9t9 23zm256 0v576q0 14-9 23t-23 9h-64q-14 0-23-9t-9-23V736q0-14 9-23t23-9h64q14 0 23 9t9 23zm256 0v576q0 14-9 23t-23 9h-64q-14 0-23-9t-9-23V736q0-14 9-23t23-9h64q14 0 23 9t9 23zm128 724V512H448v948q0 22 7 40.5t14.5 27 10.5 8.5h832q3 0 10.5-8.5t14.5-27 7-40.5zM672 384h448l-48-117q-7-9-17-11H738q-10 2-17 11zm928 32v64q0 14-9 23t-23 9h-96v948q0 83-47 143.5t-113 60.5H480q-66 0-113-58.5T320 1464V512h-96q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h309l70-167q15-37 54-63t79-26h320q40 0 79 26t54 63l70 167h309q14 0 23 9t9 23z\"/>\r\n  </svg>\r\n);\r\n\r\nexport default Trash;\r\n","import React   from 'react';\r\nimport { useFormik } from 'formik';\r\nimport * as moment from 'moment';\r\nimport { getSelectedMeal, getModalStatus } from \"../store/selectors\";\r\nimport { closeModal, createMeal, updateMeal, deleteMeal, modalFailure, modalRequest, modalSuccess } from \"../store/actions\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport { Field, FieldGroup, Select, Input, Label } from \"./Field\";\r\nimport Trash from \"./Trash\";\r\nimport Spinner from \"./Spinner\";\r\n\r\nconst typeLabels = {\r\n  'portion': '1 порцию',\r\n  'piece': '1 шт',\r\n  'gram': '100 гр',\r\n  'milliliter': '100 мл',\r\n};\r\n\r\nconst quantityLabels = {\r\n  'portion': 'порц',\r\n  'piece': 'шт',\r\n  'gram': 'гр',\r\n  'milliliter': 'мл',\r\n};\r\n\r\nconst initialProduct = {\r\n  name: \"\",\r\n  calorie: \"\",\r\n  type: 'portion',\r\n  quantity: \"\",\r\n};\r\n\r\nconst Form = () => {\r\n  const now = moment();\r\n  const dispatch = useDispatch();\r\n  const loading = useSelector(getModalStatus);\r\n  const onSubmit = values => {\r\n    const { _id, ...meal } = values;\r\n    dispatch(modalRequest());\r\n    dispatch(_id ? updateMeal(_id, meal) : createMeal(meal))\r\n      .then((a,b,c) => {\r\n        console.log('modal success', a, b, c);\r\n        dispatch(modalSuccess())\r\n      })\r\n      .then((a,b,c) => {\r\n        console.log('close modal', a, b, c);\r\n        dispatch(closeModal())\r\n      })\r\n      .catch((a,b,c) => {\r\n        console.log('error', a, b, c);\r\n        dispatch(modalFailure());\r\n      });\r\n  };\r\n  const onRemove = id => {\r\n    dispatch(modalRequest());\r\n    dispatch(deleteMeal(id))\r\n      .then(() => dispatch(modalSuccess()))\r\n      .then(() => dispatch(closeModal()))\r\n      .catch((a,b,c) => {\r\n        console.log('error', a, b, c);\r\n        dispatch(modalFailure());\r\n      });\r\n  };\r\n  const onReset = () => dispatch(closeModal());\r\n  const { values, setFieldValue, handleSubmit, handleChange, handleReset } = useFormik({\r\n    initialValues: useSelector(getSelectedMeal) || {\r\n      name: \"\",\r\n      date: now.format('YYYY-MM-DD'),\r\n      time: now.format('HH:mm'),\r\n      products: [{ ...initialProduct }],\r\n    },\r\n    onSubmit,\r\n    onReset,\r\n  });\r\n\r\n  const productCount = values.products.length;\r\n\r\n  const addProduct = () => {\r\n    setFieldValue('products', values.products.concat({ ...initialProduct }));\r\n  };\r\n\r\n  const removeProduct = index => () => {\r\n    setFieldValue('products', values.products.filter((_, productIndex) => index !== productIndex));\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className={`Form${loading ? ' Form_loading' : ''}`}>\r\n      {loading && <Spinner />}\r\n      <div className=\"Form-Container\">\r\n        <div className=\"Form-Title\">\r\n          {values._id ? 'Редактировать прием пищи' : 'Добавить прием пищи'}\r\n        </div>\r\n        <Field\r\n          name=\"date\"\r\n          title=\"Дата\"\r\n          placeholder=\"ДД.ММ.ГГГГ\"\r\n          value={values.date}\r\n          onChange={handleChange}\r\n        />\r\n        <Field\r\n          name=\"time\"\r\n          title=\"Время\"\r\n          placeholder=\"ЧЧ:ММ\"\r\n          value={values.time}\r\n          onChange={handleChange}\r\n        />\r\n        {Object.values(values.products).map((product, i) => {\r\n          return (\r\n            <div className=\"Form-C\" key={`product-${i}`}>\r\n              <Field\r\n                name={`products[${i}].name`}\r\n                title=\"Название\"\r\n                value={values.products[i].name}\r\n                onChange={handleChange}\r\n              />\r\n              <FieldGroup title=\"Калорийность\">\r\n                <Input\r\n                  value={values.products[i].calorie}\r\n                  onChange={handleChange}\r\n                  name={`products[${i}].calorie`}\r\n                  first={true}\r\n                />\r\n                <Label>на</Label>\r\n                <Select\r\n                  className=\"w-32 Input Input_noBorder Input_noLeft\"\r\n                  value={values.products[i].type}\r\n                  onChange={handleChange}\r\n                  name={`products[${i}].type`}\r\n                  last={true}\r\n                  options={typeLabels}\r\n                />\r\n              </FieldGroup>\r\n              <FieldGroup title=\"Количество\">\r\n                <Input\r\n                  value={values.products[i].quantity}\r\n                  onChange={handleChange}\r\n                  name={`products[${i}].quantity`} first={true}\r\n                />\r\n                <Label last={true}>{quantityLabels[values.products[i].type]}</Label>\r\n              </FieldGroup>\r\n              <div className=\"flex justify-between\">\r\n                {(i === productCount - 1) && (\r\n                  <button type=\"button\" className=\"Form-Add\" onClick={addProduct}>Добавить еще</button>\r\n                )}\r\n                {(productCount > 1) && (\r\n                  <button type=\"button\" className=\"Form-Remove\" onClick={removeProduct(i)}>Удалить</button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )\r\n        })}\r\n        {(productCount > 1) && (\r\n          <Field\r\n            title=\"Название приема пищи\"\r\n            name=\"name\"\r\n            value={values.name}\r\n            onChange={handleChange}\r\n          />\r\n        )}\r\n      </div>\r\n      <div className=\"Form-Footer\">\r\n\r\n        {values._id && (\r\n          <button\r\n            onClick={() => onRemove(values._id)}\r\n            type=\"button\"\r\n            className=\"Form-RemoveItem\"\r\n          >\r\n            <Trash className=\"Form-Trash\" />\r\n          </button>\r\n        )}\r\n        <div className=\"Form-Actions\">\r\n          <button type=\"button\" onClick={handleReset} className=\"Form-Action Form-Action_secondary\">Отмена</button>\r\n          <button type=\"submit\" className=\"Form-Action\">Сохранить</button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n","import React, { useEffect } from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { getScrollbarWidth } from '../utils';\r\nimport { isModalActive } from \"../store/selectors\";\r\nimport Form from \"./Form\";\r\n\r\nconst Modal = ({ children }) => {\r\n  const modalActive = useSelector(isModalActive);\r\n\r\n  useEffect(() => {\r\n    if (!modalActive) {\r\n      return;\r\n    }\r\n\r\n    document.body.style.paddingRight = getScrollbarWidth() + 'px';\r\n    document.body.classList.add('scroll-lock');\r\n\r\n    return () => {\r\n      document.body.classList.remove('scroll-lock');\r\n      document.body.style.paddingRight = '0';\r\n    }\r\n  }, [modalActive]);\r\n\r\n  if (!modalActive) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"Modal\">\r\n      <div className=\"Modal-Body\">\r\n        <Form />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { loadMeals } from \"../store/actions\";\r\nimport { getStatus } from \"../store/selectors\";\r\n\r\nimport Spinner from \"./Spinner\";\r\nimport Header from \"./Header\";\r\nimport Content from \"./Content\";\r\nimport AddNew from \"./AddNew\";\r\nimport Modal from \"./Modal\";\r\n\r\nconst Main = () => {\r\n  const dispatch = useDispatch();\r\n  const status = useSelector(getStatus);\r\n\r\n  useEffect(() => {\r\n    dispatch(loadMeals());\r\n  }, []);\r\n\r\n  if (status === 'loading') {\r\n    return <Spinner />;\r\n  } else if (status === 'error') {\r\n    return 'Ошибка';\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Header />\r\n      <Content />\r\n      <AddNew />\r\n      <Modal />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport { login } from '../store/actions';\r\nimport tokenStorage from \"../utils/token\";\r\n\r\nconst emojis = '🥕🥦🥬🍽🍴🥄🥢🍰🧁🍥🥘🍲🍜🍙🍱🍗🍖🥩🍕🍔🍟🌭🥓🧇🥞🧀🥗🥠'\r\n  .split(/([\\uD800-\\uDBFF][\\uDC00-\\uDFFF])/).filter(Boolean);\r\n\r\nconst Auth = () => {\r\n  const [emojiIndex] = useState(() => Math.floor(Math.random() * emojis.length));\r\n  const dispatch = useDispatch();\r\n\r\n  const signIn = () => {\r\n    const auth2 = window.gapi.auth2.getAuthInstance();\r\n    auth2.signIn().then(googleUser => {\r\n      const id_token = googleUser.getAuthResponse().id_token;\r\n      tokenStorage.setToken(id_token);\r\n      dispatch(login());\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-full items-center justify-center\">\r\n      <div className=\"py-10 bg-white rounded-lg shadow-lg max-w-2xl text-center w-11/12 px-4\">\r\n        <p className=\"text-6xl\">{emojis[emojiIndex]}</p>\r\n        <p className=\"text-2xl font-semibold\">FoodLog</p>\r\n        <p className=\"mb-6\">Супер удобное приложение для подсчета каллорий!</p>\r\n        <button onClick={signIn} className=\"hover:shadow-md transition ease-in-out duration-300 px-4 py-2 rounded flex items-center mx-auto bg-gray-200 border border-gray-400 text-gray-700 font-medium\">\r\n          <svg className=\"w-5 h-5 mr-2\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 533.5 544.3\">\r\n            <path d=\"M533.5 278.4c0-18.5-1.5-37.1-4.7-55.3H272.1v104.8h147c-6.1 33.8-25.7 63.7-54.4 82.7v68h87.7c51.5-47.4 81.1-117.4 81.1-200.2z\" fill=\"#4285f4\"/>\r\n            <path d=\"M272.1 544.3c73.4 0 135.3-24.1 180.4-65.7l-87.7-68c-24.4 16.6-55.9 26-92.6 26-71 0-131.2-47.9-152.8-112.3H28.9v70.1c46.2 91.9 140.3 149.9 243.2 149.9z\" fill=\"#34a853\"/>\r\n            <path d=\"M119.3 324.3c-11.4-33.8-11.4-70.4 0-104.2V150H28.9c-38.6 76.9-38.6 167.5 0 244.4l90.4-70.1z\" fill=\"#fbbc04\"/>\r\n            <path d=\"M272.1 107.7c38.8-.6 76.3 14 104.4 40.8l77.7-77.7C405 24.6 339.7-.8 272.1 0 169.2 0 75.1 58 28.9 150l90.4 70.1c21.5-64.5 81.8-112.4 152.8-112.4z\" fill=\"#ea4335\"/>\r\n          </svg>\r\n          Войти с помощью Google\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Auth;\r\n","import React  from 'react';\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport { getIsAuthorized } from \"./store/selectors\";\nimport { login } from \"./store/actions\";\nimport tokenStorage from \"./utils/token\";\n\nimport Main from './components/Main';\nimport Auth from './components/Auth';\n\nfunction App() {\n  const token = tokenStorage.getToken;\n  const isAuthorized2 =  useSelector(getIsAuthorized);\n  const dispatch = useDispatch();\n\n  if (token) {\n    dispatch(login());\n  }\n\n  if (isAuthorized2) {\n    return (\n      <Main/>\n    );\n  }\n\n  return (\n    <Auth />\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport * as moment from 'moment';\nimport 'moment/locale/ru';\n\nimport store from './store';\n\nimport App from './App';\n\nimport './index.css';\n\nmoment.locale('ru');\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}